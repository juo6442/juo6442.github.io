---
layout: post
title: "「새로 입사한 개발자가 프로젝트에 기여하는 방법 한 가지」를 읽고 한 공부"
categories: study
published: true
---

## 들어가며

김종립님이 마켓컬리 기술 블로그에 작성하신 [새로 입사한 개발자가 프로젝트에 기여하는 방법 한 가지](https://helloworld.kurly.com/blog/fix-style-with-command/)를 읽었습니다. '이런 쉽고 멋진 방법이!'라고 생각했습니다만, 부끄럽게도 중간중간에 나오는 셸 명령어 중에 아는 것이 거의 없다는 사실을 깨달았습니다. 지금 일하는 곳에선 코드를 수정할 일보다는 분석해야 할 일이 훨씬 많아서 주로 VS Code나 OpenGrok를 이용해 코드를 뚫어지게 들어다보는 시간이 많았거든요. 하지만 저도 셸을 사용하지 않는 것은 아니고, 아는 게 많아지면 더 멋진 것을 할 수 있지 않을까요? 그래서 부족하게나마 김종립님의 글에서 다룬 명령어에 대하여 조사해 보았습니다.

이하 소제목과 명령어는 김종립님의 글에서 가져온 것입니다.

## 코딩 스타일 가이드를 읽다가 작성한 Pull Request

```shell
find . -name '*.java' \
  | xargs egrep '^\s*if[^\{]*\s*$' --no-filename
```

## if, for 문에 붙은 괄호에 공백을 주자

```shell
KEYWORDS="(if|for|while|try)"
ag "$KEYWORDS\(" -l \
  | xargs sed -i ''  -E "s/$KEYWORDS\(/\1 (/"
```

## 대문자로 시작하는 lambda 변수 이름을 소문자로 시작하게 바꾸자

```shell
ag '\(([A-Z]\w*)\s?\-\>\s*\1' -l \
  | xargs gsed -i.orig -e '/\.filter/ s,(\([A-Z]\),(\L\1,; s,-> \([A-Z]\),-> \L\1,'
```

## 화살표 연산자 좌우에 스페이스를 1개 추가하자

```shell
find . -name '*.java' \
  | xargs ag '\-\>(?=\S)|(?<=\S)\-\>' -l \
  | xargs sed -i.orig -E "s,([^ ])->,\1 ->,; s,->([^ ]),-> \1,"
```

## 프로젝트 전체에서 탭 문자를 sed로 2 spaces로 교체하자

```shell
find . -name '*.java' \
  | xargs ag '\t' -l \
  | xargs sed -E -i '' "s/[[:cntrl:]]/  /g"
```

## 여는 중괄호 앞에 스페이스를 1개 추가하자

```shell
ag '\)\{' -l | xargs sed -i.orig 's/){/) {/'
```

위에서 모두 나왔던 용례이고 이제 이 정도는 간단하죠. 파일 내 "){"를 ") {"로 바꾸는 명령입니다.

## 마치며

모르는 부분도 있었지만, 앞으로 언젠간 분명 활용할 일이 있을 것 같은 예제를 가지고 공부하니 오랜만에 신이 났습니다. 막연하게 셸로 많은 것을 할 수 있지만 사용법은 복잡하겠지 하고 생각해 왔었는데 알고 나니 조금 고민하면 여기저기 써 먹을 수 있겠다는 자신감이 붙네요.

명령어를 직접 제가 다니고 있는 회사 코드에 실행해 보니 컨벤션에 맞지 않는 부분이 꽤나 많이 나왔습니다. 하지만 아쉽게도 이런 식의 전역적인 코드 수정은 되도록이면 하지 않는 분위기인데, 워낙 많은 사람들이 많은 부분을 하루에도 몇 번씩 수정하다 보니 컨플릭을 해결하기가 까다로워서(귀찮아서?)로 보입니다. 나중에 한 번씩 큰 수정이 있을 시기를 노려보려고 합니다.